# ðŸ“š RÃ©sumÃ© Complet Apache Hadoop - Guide Junior

> **Objectif** : Tout ce qu'un IngÃ©nieur Support & IntÃ©gration Junior Big Data doit savoir sur Hadoop

---

## Table des matiÃ¨res

1. [Vue d'ensemble Hadoop](#1--vue-densemble-hadoop)
2. [HDFS - Architecture](#2--hdfs---architecture)
3. [NameNode en dÃ©tail](#3--namenode-en-dÃ©tail)
4. [DataNode en dÃ©tail](#4--datanode-en-dÃ©tail)
5. [Haute DisponibilitÃ© (HA)](#5--haute-disponibilitÃ©-ha)
6. [Flux de lecture/Ã©criture HDFS](#6--flux-de-lectureÃ©criture-hdfs)
7. [Data Locality](#7--data-locality)
8. [Rack Awareness](#8--rack-awareness)
9. [Small Files Problem](#9--small-files-problem)
10. [MapReduce](#10--mapreduce)
11. [YARN](#11--yarn)
12. [Hive](#12--hive)
13. [HBase](#13--hbase)
14. [Commandes CLI essentielles](#14--commandes-cli-essentielles)
15. [Monitoring et Diagnostic](#15--monitoring-et-diagnostic)
16. [Erreurs courantes](#16--erreurs-courantes)
17. [Checklist Entretien Junior](#17--checklist-entretien-junior)

---

## 1. ðŸŒ Vue d'ensemble Hadoop

### Les 3 couches principales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HADOOP = 3 COUCHES                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        APPLICATIONS                                â”‚  â”‚
â”‚  â”‚         (Hive, Pig, HBase, Spark, ton code...)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                        â”‚
â”‚                                 â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     YARN (Resource Manager)                        â”‚  â”‚
â”‚  â”‚              GÃ¨re les ressources du cluster                        â”‚  â”‚
â”‚  â”‚              (CPU, RAM, qui exÃ©cute quoi)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                        â”‚
â”‚                                 â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     HDFS (Stockage distribuÃ©)                      â”‚  â”‚
â”‚  â”‚              Stocke les fichiers en blocs                          â”‚  â”‚
â”‚  â”‚              Sur plusieurs machines                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ã‰cosystÃ¨me Hadoop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ã‰COSYSTÃˆME HADOOP                                   â”‚
â”‚                                                                          â”‚
â”‚   REQUÃŠTES SQL          SCRIPTING           BASE NoSQL                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚  HIVE   â”‚          â”‚   PIG   â”‚         â”‚  HBASE  â”‚                 â”‚
â”‚   â”‚  (SQL)  â”‚          â”‚ (Script)â”‚         â”‚ (NoSQL) â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                 â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â–¼                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    MAPREDUCE / SPARK                             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         YARN                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         HDFS                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tableau rÃ©capitulatif

| Composant | Type | RÃ´le | Analogie |
|-----------|------|------|----------|
| **HDFS** | Stockage | SystÃ¨me de fichiers distribuÃ© | Disque dur gÃ©ant |
| **YARN** | Resource Manager | GÃ¨re CPU/RAM du cluster | Chef de projet |
| **MapReduce** | Moteur de calcul | Traitement batch | Ancien moteur |
| **Hive** | SQL Engine | SQL sur HDFS | Base de donnÃ©es SQL |
| **Pig** | Script Engine | Traitement procÃ©dural | ETL scripting |
| **HBase** | NoSQL DB | AccÃ¨s temps rÃ©el | MongoDB/Cassandra |
| **ZooKeeper** | Coordination | GÃ¨re l'Ã©tat du cluster | Registre central |

---

## 2. ðŸ“ HDFS - Architecture

### Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           HDFS                                           â”‚
â”‚                                                                          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                      â”‚    NAMENODE     â”‚                                â”‚
â”‚                      â”‚    (Master)     â”‚                                â”‚
â”‚                      â”‚                 â”‚                                â”‚
â”‚                      â”‚  - MÃ©tadonnÃ©es  â”‚                                â”‚
â”‚                      â”‚  - Arborescence â”‚                                â”‚
â”‚                      â”‚  - Bloc â†’ Node  â”‚                                â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                               â”‚                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚            â”‚                  â”‚                  â”‚                      â”‚
â”‚            â–¼                  â–¼                  â–¼                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚  DATANODE  â”‚     â”‚  DATANODE  â”‚     â”‚  DATANODE  â”‚               â”‚
â”‚     â”‚  (Worker)  â”‚     â”‚  (Worker)  â”‚     â”‚  (Worker)  â”‚               â”‚
â”‚     â”‚            â”‚     â”‚            â”‚     â”‚            â”‚               â”‚
â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚               â”‚
â”‚     â”‚ â”‚ Bloc 1 â”‚ â”‚     â”‚ â”‚ Bloc 1 â”‚ â”‚     â”‚ â”‚ Bloc 2 â”‚ â”‚               â”‚
â”‚     â”‚ â”‚ Bloc 2 â”‚ â”‚     â”‚ â”‚ Bloc 3 â”‚ â”‚     â”‚ â”‚ Bloc 3 â”‚ â”‚               â”‚
â”‚     â”‚ â”‚ Bloc 4 â”‚ â”‚     â”‚ â”‚ Bloc 4 â”‚ â”‚     â”‚ â”‚ Bloc 1 â”‚ â”‚               â”‚
â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                          â”‚
â”‚     Chaque bloc est rÃ©pliquÃ© sur 3 DataNodes (par dÃ©faut)               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Comment un fichier est stockÃ©

```
FICHIER: rapport.csv (400 MB)

                    DÃ©coupage en blocs (128 MB chacun)
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bloc 0   â”‚  â”‚  Bloc 1   â”‚  â”‚  Bloc 2   â”‚  â”‚  Bloc 3   â”‚
â”‚  128 MB   â”‚  â”‚  128 MB   â”‚  â”‚  128 MB   â”‚  â”‚   16 MB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚              â”‚              â”‚
      â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RÃ‰PLICATION (factor=3)                 â”‚
â”‚                                                           â”‚
â”‚  Bloc 0 â†’ DataNode 1, DataNode 3, DataNode 5             â”‚
â”‚  Bloc 1 â†’ DataNode 2, DataNode 4, DataNode 6             â”‚
â”‚  Bloc 2 â†’ DataNode 1, DataNode 2, DataNode 4             â”‚
â”‚  Bloc 3 â†’ DataNode 3, DataNode 5, DataNode 6             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants principaux

| Composant | RÃ´le | Stocke |
|-----------|------|--------|
| **NameNode** | Master, cerveau | MÃ©tadonnÃ©es (oÃ¹ sont les blocs) |
| **DataNode** | Worker, stockage | Les blocs de donnÃ©es rÃ©els |
| **Secondary NameNode** | Checkpoints seulement | Fusionne fsimage + edits |
| **Standby NameNode** | Vrai backup (HA) | Copie synchronisÃ©e |

### ParamÃ¨tres par dÃ©faut

| ParamÃ¨tre | Valeur par dÃ©faut | Description |
|-----------|-------------------|-------------|
| `dfs.blocksize` | 128 MB | Taille d'un bloc |
| `dfs.replication` | 3 | Nombre de rÃ©plicas |
| `dfs.heartbeat.interval` | 3 secondes | Intervalle heartbeat |
| Timeout DataNode mort | ~10 minutes | Sans heartbeat |

---

## 3. ðŸ§  NameNode en dÃ©tail

### RÃ´le du NameNode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NAMENODE                                         â”‚
â”‚                                                                          â”‚
â”‚  STOCKE EN MÃ‰MOIRE (RAM):                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  - Arborescence des fichiers (/user/data/fichier.csv)           â”‚   â”‚
â”‚  â”‚  - Permissions (rwxr-xr-x)                                       â”‚   â”‚
â”‚  â”‚  - Mapping fichier â†’ blocs                                       â”‚   â”‚
â”‚  â”‚  - Mapping bloc â†’ DataNodes                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  STOCKE SUR DISQUE:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  fsimage    = Snapshot complet des mÃ©tadonnÃ©es                  â”‚   â”‚
â”‚  â”‚  edits log  = Journal des modifications rÃ©centes                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  AU DÃ‰MARRAGE:                                                          â”‚
â”‚  fsimage + edits log â†’ Reconstruit l'Ã©tat en RAM                       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš ï¸ PIÃˆGE D'ENTRETIEN : Secondary NameNode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âš ï¸  TRÃˆS IMPORTANT - PIÃˆGE CLASSIQUE !  âš ï¸                      â”‚
â”‚                                                                          â”‚
â”‚  SECONDARY NAMENODE â‰  BACKUP â‰  FAILOVER                                 â”‚
â”‚                                                                          â”‚
â”‚  Le Secondary NameNode fait SEULEMENT des CHECKPOINTS :                 â”‚
â”‚                                                                          â”‚
â”‚  1. RÃ©cupÃ¨re fsimage + edits log du NameNode                           â”‚
â”‚  2. Fusionne les deux â†’ nouveau fsimage                                 â”‚
â”‚  3. Renvoie le nouveau fsimage au NameNode                             â”‚
â”‚                                                                          â”‚
â”‚  AVANTAGE: RÃ©duit le temps de redÃ©marrage du NameNode                  â”‚
â”‚                                                                          â”‚
â”‚  âŒ NE PEUT PAS prendre la relÃ¨ve si NameNode tombe !                  â”‚
â”‚                                                                          â”‚
â”‚  Pour un VRAI failover â†’ Standby NameNode (HA)                         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ðŸ’¾ DataNode en dÃ©tail

### Communication avec le NameNode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                COMMUNICATION DATANODE â†’ NAMENODE                         â”‚
â”‚                                                                          â”‚
â”‚  HEARTBEAT (toutes les 3 secondes):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DataNode â†’ NameNode: "Je suis vivant!"                         â”‚   â”‚
â”‚  â”‚  Contient: capacitÃ©, espace utilisÃ©, nombre de blocs            â”‚   â”‚
â”‚  â”‚  NameNode rÃ©pond avec des COMMANDES (rÃ©pliquer, supprimer...)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  BLOCK REPORT (toutes les 6 heures):                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DataNode â†’ NameNode: "Voici la liste de TOUS mes blocs"        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  TIMEOUT (~10 minutes sans heartbeat):                                  â”‚
â”‚  â†’ NameNode dÃ©clare le DataNode comme MORT                             â”‚
â”‚  â†’ Lance la RE-RÃ‰PLICATION des blocs manquants                         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ðŸ›¡ Haute DisponibilitÃ© (HA)

### Architecture HA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HDFS HAUTE DISPONIBILITÃ‰                              â”‚
â”‚                                                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚     â”‚  NameNode    â”‚              â”‚   Standby    â”‚                      â”‚
â”‚     â”‚   ACTIVE     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  NameNode    â”‚                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚            â”‚                             â”‚                               â”‚
â”‚            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                               â”‚
â”‚            â””â”€â”€â”€â–ºâ”‚  JOURNAL NODES    â”‚â—„â”€â”€â”€â”˜                               â”‚
â”‚                 â”‚  (minimum 3)      â”‚                                    â”‚
â”‚                 â”‚  Stocke edits log â”‚                                    â”‚
â”‚                 â”‚  partagÃ©          â”‚                                    â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                           â”‚                                              â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚                 â”‚    ZOOKEEPER      â”‚                                    â”‚
â”‚                 â”‚   (minimum 3)     â”‚                                    â”‚
â”‚                 â”‚  - Ã‰lection leaderâ”‚                                    â”‚
â”‚                 â”‚  - Failover auto  â”‚                                    â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                          â”‚
â”‚  Si Active tombe â†’ ZooKeeper Ã©lit Standby comme nouveau Active         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants HA

| Composant | RÃ´le | Minimum |
|-----------|------|---------|
| **Active NameNode** | Traite les requÃªtes | 1 |
| **Standby NameNode** | PrÃªt Ã  prendre la relÃ¨ve | 1 |
| **JournalNodes** | Stocke edits partagÃ© | 3 |
| **ZooKeeper** | Ã‰lection et failover | 3 |

---

## 6. ðŸ“– Flux de lecture/Ã©criture HDFS

### Flux de lecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LECTURE D'UN FICHIER HDFS                             â”‚
â”‚                                                                          â”‚
â”‚  Client veut lire: /user/data/fichier.csv                               â”‚
â”‚                                                                          â”‚
â”‚         CLIENT                    NAMENODE                               â”‚
â”‚            â”‚                          â”‚                                  â”‚
â”‚            â”‚  1. "OÃ¹ est fichier.csv?"â”‚                                  â”‚
â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                                  â”‚
â”‚            â”‚                          â”‚                                  â”‚
â”‚            â”‚  2. "Blocs: B1â†’DN1,DN3  â”‚                                  â”‚
â”‚            â”‚       B2â†’DN2,DN4"       â”‚                                  â”‚
â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                  â”‚
â”‚            â”‚                                                             â”‚
â”‚            â”‚  3. Lire depuis DataNodes (directement)                    â”‚
â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DN1 â”€â”€â”€â–º donnÃ©es                 â”‚
â”‚                                                                          â”‚
â”‚  NOTE: Le client lit DIRECTEMENT depuis les DataNodes                   â”‚
â”‚        Le NameNode ne voit PAS les donnÃ©es                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flux d'Ã©criture (Pipeline)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ã‰CRITURE D'UN FICHIER HDFS                            â”‚
â”‚                                                                          â”‚
â”‚  3. PIPELINE D'Ã‰CRITURE (replication = 3)                               â”‚
â”‚                                                                          â”‚
â”‚     CLIENT                                                               â”‚
â”‚        â”‚     donnÃ©es                                                     â”‚
â”‚        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DN1 â”€â”€â”€â”€â”€â”€â”€â”€â–º DN2 â”€â”€â”€â”€â”€â”€â”€â”€â–º DN3                   â”‚
â”‚        â”‚              â”‚             â”‚             â”‚                      â”‚
â”‚        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚        â”‚                    ACK (confirmation)                           â”‚
â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚                                                                          â”‚
â”‚  Pipeline: Client â†’ DN1 â†’ DN2 â†’ DN3                                     â”‚
â”‚  ACK remonte: DN3 â†’ DN2 â†’ DN1 â†’ CLIENT                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ðŸ“ Data Locality

### Concept fondamental

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LOCALITY                                      â”‚
â”‚                                                                          â”‚
â”‚  PRINCIPE: "DÃ©placer le CALCUL vers les DONNÃ‰ES"                        â”‚
â”‚            (pas les donnÃ©es vers le calcul)                             â”‚
â”‚                                                                          â”‚
â”‚  POURQUOI ?                                                             â”‚
â”‚  - DonnÃ©es = trÃ¨s grosses (TB, PB)                                      â”‚
â”‚  - Code = trÃ¨s petit (KB, MB)                                           â”‚
â”‚  - Transfert rÃ©seau = LENT                                              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ MAUVAIS: DÃ©placer les donnÃ©es (500 GB) â†’ LENT
âœ… BON: DÃ©placer le code (10 KB) â†’ RAPIDE
```

### Niveaux de localitÃ©

| Niveau | Description | Performance |
|--------|-------------|-------------|
| **Data Local** | Task sur le mÃªme nÅ“ud | âš¡âš¡âš¡ Meilleur |
| **Rack Local** | Task sur le mÃªme rack | âš¡âš¡ Bon |
| **Off-Rack** | Task sur un autre rack | âš¡ Moins bon |

---

## 8. ðŸ¢ Rack Awareness

### Placement des rÃ©plicas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RÃˆGLE DE PLACEMENT (replication factor = 3)                 â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚     RACK 1      â”‚           â”‚     RACK 2      â”‚                      â”‚
â”‚  â”‚                 â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚
â”‚  â”‚  â”‚   DN1     â”‚  â”‚           â”‚  â”‚   DN3     â”‚  â”‚                      â”‚
â”‚  â”‚  â”‚ [Bloc A]  â”‚  â”‚           â”‚  â”‚ [Bloc A]  â”‚  â”‚                      â”‚
â”‚  â”‚  â”‚ Replica 1 â”‚  â”‚           â”‚  â”‚ Replica 3 â”‚  â”‚                      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚
â”‚  â”‚                 â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â”‚   DN2     â”‚  â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â”‚ [Bloc A]  â”‚  â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â”‚ Replica 2 â”‚  â”‚           â”‚                 â”‚                      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚                 â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  Replica 1 & 2: MÃªme rack (rapide)                                      â”‚
â”‚  Replica 3: Rack DIFFÃ‰RENT (tolÃ©rance aux pannes)                       â”‚
â”‚                                                                          â”‚
â”‚  Si RACK 1 tombe â†’ donnÃ©es disponibles sur RACK 2                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ðŸ“„ Small Files Problem

### Le problÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SMALL FILES PROBLEM                                   â”‚
â”‚                                                                          â”‚
â”‚  HDFS est optimisÃ© pour GROS fichiers, pas petits !                    â”‚
â”‚                                                                          â”‚
â”‚  PROBLÃˆME - MÃ‰MOIRE NAMENODE:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Chaque fichier/bloc = ~150 bytes en mÃ©moire                    â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  1 million de fichiers   = 150 MB de RAM    âœ… OK               â”‚   â”‚
â”‚  â”‚  1 milliard de fichiers  = 150 GB de RAM    âŒ Trop!            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  + Overhead de scheduling (1 mapper par fichier)                        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Solutions

| Solution | Description |
|----------|-------------|
| **HAR** | Hadoop Archive - combine petits fichiers |
| **SequenceFile** | Fichier conteneur clÃ©-valeur |
| **CombineFileInputFormat** | Combine fichiers en 1 split |
| **Compaction** | Fusionner pÃ©riodiquement |
| **HBase** | Pour petites Ã©critures frÃ©quentes |

---

## 10. ðŸ”„ MapReduce

### Concept

```
1. INPUT         2. MAP           3. SHUFFLE      4. REDUCE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      & SORT         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fichier â”‚  â†’   â”‚ (clÃ©,   â”‚  â†’   Regrouper  â†’   â”‚ AgrÃ©ger â”‚
â”‚ dÃ©coupÃ© â”‚      â”‚  valeur)â”‚      par clÃ©        â”‚ par clÃ© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Exemple Word Count

```
INPUT: "hello world hello hadoop"

MAP:              SHUFFLE:           REDUCE:
(hello, 1)        hello  â†’ [1, 1]    (hello, 2)
(world, 1)   â†’    hadoop â†’ [1]    â†’  (hadoop, 1)
(hello, 1)        world  â†’ [1]       (world, 1)
(hadoop, 1)
```

### Pourquoi MapReduce est lent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Ã‰CRIT SUR DISQUE entre chaque Ã©tape                                 â”‚
â”‚  2. Pas adaptÃ© aux ITÃ‰RATIONS (Machine Learning)                        â”‚
â”‚  3. Seulement BATCH                                                     â”‚
â”‚                                                                          â”‚
â”‚  â†’ SPARK l'a remplacÃ© (garde en RAM)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. ðŸŽ› YARN

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            YARN                                          â”‚
â”‚                                                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚            â”‚       RESOURCE MANAGER (RM)         â”‚                      â”‚
â”‚            â”‚            (Master)                 â”‚                      â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                               â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â–¼                     â–¼                     â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ NODE MANAGERâ”‚       â”‚ NODE MANAGERâ”‚       â”‚ NODE MANAGERâ”‚           â”‚
â”‚  â”‚  (Worker)   â”‚       â”‚  (Worker)   â”‚       â”‚  (Worker)   â”‚           â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚
â”‚  â”‚ â”‚Containerâ”‚ â”‚       â”‚ â”‚Containerâ”‚ â”‚       â”‚ â”‚Containerâ”‚ â”‚           â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants

| Composant | RÃ´le |
|-----------|------|
| **Resource Manager** | Master global, alloue ressources |
| **Node Manager** | Agent sur chaque machine |
| **Application Master** | Coordonne 1 application (1 par job) |
| **Container** | Allocation CPU + RAM |

### YARN supporte plusieurs frameworks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MapReduce â”‚  â”‚   Spark   â”‚  â”‚   Tez     â”‚  â”‚   Flink   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚       YARN        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. ðŸ Hive

### C'est quoi ?

SQL sur HDFS. Traduit SQL en MapReduce/Tez/Spark.

```
SELECT city, COUNT(*) FROM users GROUP BY city;
                    â”‚
                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   HIVE   â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  MapReduce Jobs â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Exemples SQL

```sql
-- CrÃ©er une table externe
CREATE EXTERNAL TABLE users (
    id INT,
    name STRING,
    age INT,
    city STRING
)
STORED AS PARQUET
LOCATION '/data/users/';

-- RequÃªte
SELECT city, COUNT(*) as count
FROM users
WHERE age > 18
GROUP BY city;
```

### Hive vs HBase

| CritÃ¨re | Hive | HBase |
|---------|------|-------|
| **Type** | Data Warehouse | Base NoSQL |
| **AccÃ¨s** | Batch (lent) | Temps rÃ©el (rapide) |
| **RequÃªtes** | SQL complet | Get/Put par clÃ© |
| **Usage** | Analytics, BI | Applications temps rÃ©el |

---

## 13. ðŸ“Š HBase

### C'est quoi ?

Base NoSQL temps rÃ©el sur HDFS.

### ModÃ¨le de donnÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Row Key  â”‚    Column Family: info      â”‚   Column Family: stats  â”‚
â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚  name   â”‚  age    â”‚  city   â”‚ visits  â”‚  last_login   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  user001  â”‚  "Ali"  â”‚   25    â”‚ "Tunis" â”‚  150    â”‚  2024-01-15   â”‚
â”‚  user002  â”‚  "Sara" â”‚   30    â”‚ "Sfax"  â”‚   75    â”‚  2024-01-14   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Commandes HBase

```bash
# CrÃ©er table
create 'users', 'info', 'stats'

# InsÃ©rer
put 'users', 'user001', 'info:name', 'Ali'

# Lire
get 'users', 'user001'

# Scanner
scan 'users'
```

---

## 14. ðŸ’» Commandes CLI essentielles

### HDFS - Navigation

```bash
# Lister
hdfs dfs -ls /user/data/
hdfs dfs -ls -R /user/data/      # RÃ©cursif
hdfs dfs -ls -h /user/data/      # Human-readable

# CrÃ©er rÃ©pertoire
hdfs dfs -mkdir -p /user/data/input

# Copier local â†’ HDFS
hdfs dfs -put fichier.csv /user/data/

# Copier HDFS â†’ local
hdfs dfs -get /user/data/fichier.csv ./

# Lire contenu
hdfs dfs -cat /user/data/fichier.csv
hdfs dfs -head /user/data/fichier.csv
hdfs dfs -tail /user/data/fichier.csv

# Supprimer
hdfs dfs -rm /user/data/fichier.csv
hdfs dfs -rm -r /user/data/dossier/

# Espace utilisÃ©
hdfs dfs -du -s -h /user/data/

# Permissions
hdfs dfs -chmod 755 /user/data/
hdfs dfs -chown user:group /user/data/

# Fusionner
hdfs dfs -getmerge /user/data/output/* merged.csv
```

### HDFS - Administration

```bash
# Ã‰tat du cluster
hdfs dfsadmin -report

# Safe mode
hdfs dfsadmin -safemode get
hdfs dfsadmin -safemode leave

# SantÃ© filesystem
hdfs fsck /
hdfs fsck /user/data/ -files -blocks -locations

# Blocs problÃ©matiques
hdfs fsck / -list-corruptfileblocks

# Balancer
hdfs balancer -threshold 10
```

### YARN

```bash
# Lister applications
yarn application -list

# Tuer application
yarn application -kill application_xxx

# Logs
yarn logs -applicationId application_xxx

# NÅ“uds
yarn node -list
```

---

## 15. ðŸ“Š Monitoring et Diagnostic

### Interfaces Web

| Service | URL | UtilitÃ© |
|---------|-----|---------|
| **NameNode** | http://namenode:9870 | Ã‰tat HDFS |
| **Resource Manager** | http://rm:8088 | Jobs YARN |
| **History Server** | http://history:19888 | Historique |

### MÃ©triques importantes

| MÃ©trique | Seuil d'alerte |
|----------|----------------|
| **Under-replicated blocks** | > 0 prolongÃ© |
| **Missing blocks** | > 0 = CRITIQUE |
| **Dead DataNodes** | > 0 |
| **NameNode heap** | > 80% |
| **Capacity remaining** | < 20% |

### ProcÃ©dure de diagnostic

```bash
# 1. VÃ©rifier les services
jps

# 2. Ã‰tat du cluster
hdfs dfsadmin -report

# 3. SantÃ© filesystem
hdfs fsck /

# 4. Logs
tail -f /var/log/hadoop/hdfs/*.log
```

---

## 16. âŒ Erreurs courantes

| Erreur | Cause | Solution |
|--------|-------|----------|
| `Safe mode is ON` | NameNode en dÃ©marrage | Attendre ou `safemode leave` |
| `No space left` | DataNode plein | Ajouter nÅ“uds ou nettoyer |
| `Connection refused` | Service down | VÃ©rifier daemons |
| `File not found` | Mauvais chemin | VÃ©rifier avec `-ls` |
| `Permission denied` | Droits insuffisants | `chmod` |
| `Under-replicated blocks` | Replicas manquants | VÃ©rifier DataNodes |
| `Missing blocks` | CRITIQUE | `hdfs fsck`, restaurer |
| `Corrupt blocks` | DonnÃ©es corrompues | `hdfs fsck`, backup |

---

## 17. ðŸ“‹ Checklist Entretien Junior

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HADOOP - CE QUE TU DOIS SAVOIR                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ HDFS:                                                                   â”‚
â”‚ â–¡ NameNode = mÃ©tadonnÃ©es, Master, en RAM                                â”‚
â”‚ â–¡ DataNode = stockage blocs, Worker                                     â”‚
â”‚ â–¡ Bloc = 128 MB, rÃ©plication = 3                                        â”‚
â”‚ â–¡ fsimage + edits log                                                   â”‚
â”‚ â–¡ Secondary NameNode â‰  Backup (PIÃˆGE!)                                 â”‚
â”‚ â–¡ Standby NameNode = vrai backup (HA)                                   â”‚
â”‚                                                                          â”‚
â”‚ CONCEPTS:                                                               â”‚
â”‚ â–¡ Data Locality = calcul vers donnÃ©es                                   â”‚
â”‚ â–¡ Rack Awareness = placement intelligent                                â”‚
â”‚ â–¡ Small Files Problem = surcharge NameNode                              â”‚
â”‚ â–¡ Safe Mode = lecture seule au dÃ©marrage                                â”‚
â”‚                                                                          â”‚
â”‚ FLUX:                                                                   â”‚
â”‚ â–¡ Lecture: Client â†’ NameNode â†’ DataNodes                               â”‚
â”‚ â–¡ Ã‰criture: Pipeline DN1 â†’ DN2 â†’ DN3                                   â”‚
â”‚ â–¡ Heartbeat = 3s, Block Report = 6h                                     â”‚
â”‚                                                                          â”‚
â”‚ YARN:                                                                   â”‚
â”‚ â–¡ Resource Manager, Node Manager, Container                             â”‚
â”‚                                                                          â”‚
â”‚ Ã‰COSYSTÃˆME:                                                             â”‚
â”‚ â–¡ Hive = SQL (batch)                                                    â”‚
â”‚ â–¡ HBase = NoSQL (temps rÃ©el)                                           â”‚
â”‚                                                                          â”‚
â”‚ COMMANDES:                                                              â”‚
â”‚ â–¡ hdfs dfs -ls, -put, -get, -cat, -rm                                  â”‚
â”‚ â–¡ hdfs dfsadmin -report, -safemode                                     â”‚
â”‚ â–¡ hdfs fsck /                                                           â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 18. Questions d'entretien types

| Question | Points clÃ©s |
|----------|-------------|
| Comment savoir si un DataNode est down ? | UI NameNode, `dfsadmin -report`, heartbeat 10 min |
| DiffÃ©rence NameNode vs DataNode ? | NameNode = mÃ©tadonnÃ©es RAM / DataNode = blocs disque |
| Que se passe-t-il si NameNode tombe ? | SPOF, cluster down, solution = HA |
| Secondary NameNode c'est quoi ? | Checkpoints seulement, PAS backup ! |
| C'est quoi le Small Files Problem ? | Surcharge mÃ©moire NameNode |
| C'est quoi la Data Locality ? | Calcul vers donnÃ©es |
| Comment fonctionne la rÃ©plication ? | Pipeline DN1 â†’ DN2 â†’ DN3 |
| DiffÃ©rence Hive vs HBase ? | Hive = SQL/batch, HBase = NoSQL/temps rÃ©el |

---

## 19. ðŸŽ¯ RÃ©sumÃ© en une page

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          HADOOP EN BREF                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                            â•‘
â•‘  HDFS:          NameNode (mÃ©tadonnÃ©es) + DataNodes (blocs)                â•‘
â•‘  BLOC:          128 MB, rÃ©pliquÃ© 3 fois                                   â•‘
â•‘  HA:            Standby NameNode + JournalNodes + ZooKeeper               â•‘
â•‘  LECTURE:       Client â†’ NameNode (oÃ¹?) â†’ DataNode (donnÃ©es)              â•‘
â•‘  Ã‰CRITURE:      Pipeline DN1 â†’ DN2 â†’ DN3                                 â•‘
â•‘  DATA LOCALITY: Calcul vers donnÃ©es (pas l'inverse)                       â•‘
â•‘  YARN:          Resource Manager + Node Manager + Containers              â•‘
â•‘  HIVE:          SQL sur HDFS (batch)                                      â•‘
â•‘  HBASE:         NoSQL temps rÃ©el                                          â•‘
â•‘  DIAGNOSTIC:    hdfs dfsadmin -report | hdfs fsck /                       â•‘
â•‘                                                                            â•‘
â•‘  âš ï¸  Secondary NameNode â‰  Backup !                                        â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

> **Bonne chance pour ton entretien !** ðŸš€